<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>{{lang.text['AddPost']['Title']}}</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="portal/community"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-accordion-group *ngIf="servers.length" [disabled]="isSaveClicked" value="colors" expand="inset"
    [value]="isExpanded" #accordionGroup (click)="isExpanded = true">
    <ion-accordion value="colors">
      <ion-item slot="header">
        <ion-label>{{lang.text['AddGroup']['SelectServer']}}</ion-label>
        <ion-label class="ion-text-right">{{servers[index].name}}</ion-label>
        <ion-icon class="ion-accordion-toggle-icon hide_accordion_icon"></ion-icon>
      </ion-item>
      <div slot="content">
        <ion-item *ngFor="let server of servers; index as i" button (click)="select_server(i)">
          <ion-label>{{server.name}}</ion-label>
        </ion-item>
      </div>
    </ion-accordion>
  </ion-accordion-group>
  <ion-item button (click)="go_to_profile()">
    <div class="additional_form new_bg_form"
      [style]="'background-image: linear-gradient(to right, #0000, #' + userInput.UserColor + '44)'">
    </div>
    <ion-label>{{lang.text['AddPost']['Creator']}}</ion-label>
    <ion-label class="ion-text-end">{{userInput.creator_name || lang.text['Profile']['noname_user']}}</ion-label>
  </ion-item>
  <ion-item-divider>
    <ion-label>{{lang.text['AddPost']['AddNewPost']}}</ion-label>
  </ion-item-divider>
  <ion-item button>
    <ion-input id="add_post_title" [disabled]="isSaveClicked" [placeholder]="lang.text['AddPost']['TitlePlaceholder']"
      [(ngModel)]="userInput.title"></ion-input>
  </ion-item>
  <textarea id="add_post_content" class="infobox" style="height: 50%;" [disabled]="isSaveClicked"
    [placeholder]="lang.text['AddPost']['ContentPlaceHolder']"></textarea>
  <input hidden type="file" id="add_post_input" accept="*" multiple (change)="inputFileSelected($event)">
  <div style="width: 100%; text-align: center; padding-bottom: 16px;">
    <div *ngFor="let button of extended_buttons" style="display: inline-block;">
      <div class="ext_button ext_button_override" [style]="'cursor: ' + (button['cursor'] || 'pointer') + ';'"
        (click)="button['act']()" [hidden]="button.isHide">
        <ion-icon *ngIf="button['icon']" slot="icon-only" [name]="button['icon'] || 'close-circle'"
          style="width: 36px; height: 36px;">
        </ion-icon>
        <img *ngIf="button['icon_img']" class="ext_icon_img" [src]="'assets/icon/' + button['icon_img']"
          [alt]="button['title']">
        <div>{{button['name']}}</div>
      </div>
    </div>
  </div>
  <ion-item button *ngFor="let attach of userInput.attachments; let i = index" [disabled]="isSaveClicked">
    <ion-label>{{'['+ i + '] ' + attach.filename}}</ion-label>
    <div class="additional_form bg_img_form">
      <img class="profile_img" [src]="attach.thumbnail">
    </div>
  </ion-item>
  <ion-item button [disabled]="isSaveClicked" (click)="postData()">
    <ion-label class="ion-text-center">{{lang.text['AddPost']['Post']}}</ion-label>
  </ion-item>
</ion-content>