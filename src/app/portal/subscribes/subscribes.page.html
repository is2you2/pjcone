<ion-header>
  <ion-toolbar>
    <ion-title>연결</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-accordion-group *ngIf="notifications.length" value="colors" expand="inset" [value]="false"
    #accordionGroup>
    <ion-accordion value="colors">
      <ion-item slot="header">
        <ion-label>검토해야할 연결이 있습니다.</ion-label>
      </ion-item>
      <ion-list slot="content">
        <div *ngFor="let i of [0,1,2];">
          <ion-item *ngIf="notifications.length > i" button (click)="check_notifications(i)">
            <ion-label>{{notifications[i].request}}</ion-label>
          </ion-item>
        </div>
      </ion-list>
    </ion-accordion>
  </ion-accordion-group>
  <div *ngIf="!cant_scan">
    <ion-item-divider>
      <ion-label>만능 연결 버튼</ion-label>
    </ion-item-divider>
    <ion-item button (click)="scanQRCode()">
      <ion-label class="ion-text-center">연결 !</ion-label>
    </ion-item>
  </div>
  <ion-item-divider>
    <ion-label>대화</ion-label>
  </ion-item-divider>
  <ion-item *ngIf="!channels.length" button [disabled]="true">
    <ion-label>참여중인 대화가 없습니다.</ion-label>
  </ion-item>
  <div *ngIf="channels.length">
    <ion-item *ngFor="let channel of channels" button (click)="go_to_chatroom(channel)">
      <div class="additional_form status_bar_double"
        [style]="'background-color: ' + statusBar.colors[channel['status'] || 'offline']"></div>
      <div class="additional_form bg_img_form">
        <img class="bg_img"
          [style]="channel['status'] == 'online' ? 'filter: grayscale(0) contrast(1)' : 'filter: grayscale(.9) contrast(1.4)'"
          [src]="channel.img">
      </div>
      <ion-label>
        <div class="form_margin header"> {{channel.title}} </div>
        <div class="form_margin content"> {{channel.last_comment || '기록된 메시지 없음'}} </div>
      </ion-label>
    </ion-item>
  </div>
</ion-content>