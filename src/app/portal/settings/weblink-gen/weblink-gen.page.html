<ion-header>
  <ion-toolbar>
    <ion-title>{{lang.text['Settings']['WebLinkGen']}}</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="portal/settings"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-item-divider>
    <ion-label>{{lang.text['WebLinkGen']['subtitle']}}</ion-label>
  </ion-item-divider>
  <div (click)="copy_result_address()">
    <textarea class="infobox" [(ngModel)]="result_address"></textarea>
  </div>
  <ion-item-divider>
    <ion-label>{{lang.text['WebLinkGen']['CustomInfo']}}</ion-label>
  </ion-item-divider>
  <ion-item>
    <ion-input [label]="lang.text['WebLinkGen']['baseURL']" class="ion-text-end" [(ngModel)]="userInput.root"
      placeholder="https://is2you2.github.io/pjcone_pwa/" (ionChange)="baseURLChanged($event)"></ion-input>
  </ion-item>
  <ion-item>
    <ion-select [label]="lang.text['QuickQRShare']['GroupServer']" (ionChange)="SelectGroupServer($event)"
      multiple="true" [placeholder]="lang.text['QuickQRShare']['EmptyData']">
      <ion-select-option *ngFor="let gs of servers" [value]="gs">{{gs['name']}} </ion-select-option>
    </ion-select>
  </ion-item>
  <ion-item button (click)="userInput.open_profile = !userInput.open_profile; information_changed()">
    <ion-label>{{lang.text['WebLinkGen']['OpenProfile']}}</ion-label>
    <ion-toggle class="ignore_toggles" [(ngModel)]="userInput.open_profile" slot="end"></ion-toggle>
  </ion-item>
  <ion-item>
    <ion-select [label]="lang.text['QuickQRShare']['Group']" (ionChange)="SelectGroupChannel($event)" multiple="true"
      [placeholder]="lang.text['QuickQRShare']['EmptyData']">
      <ion-select-option *ngFor="let ginfo of groups" [value]="ginfo">{{ginfo['name'] + ' (' +
        ginfo['server']['name'] + ')'}}</ion-select-option>
    </ion-select>
  </ion-item>
  <ion-item button (click)="userInput.open_subscribes = !userInput.open_subscribes; information_changed()">
    <ion-label>{{lang.text['WebLinkGen']['OpenChannelTab']}}</ion-label>
    <ion-toggle class="ignore_toggles" [(ngModel)]="userInput.open_subscribes" slot="end"></ion-toggle>
  </ion-item>
  <ion-item>
    <ion-select [label]="lang.text['QuickQRShare']['RTCServer']" (ionChange)="SelectRTCServer($event)" multiple="true"
      [placeholder]="lang.text['QuickQRShare']['EmptyData']">
      <ion-select-option *ngFor="let server of rtcServer" [value]="server">
        {{ server.urls[0] }}</ion-select-option>
    </ion-select>
  </ion-item>
  <ion-item button (click)="toggle_tmp_user()">
    <ion-label>{{lang.text['WebLinkGen']['UseTempUser']}}</ion-label>
    <ion-toggle class="ignore_toggles" [(ngModel)]="userInput.use_tmp_user" slot="end"></ion-toggle>
  </ion-item>
  <div *ngIf="userInput.use_tmp_user">
    <ion-item>
      <ion-input [label]="lang.text['Profile']['email_address']" class="ion-text-end"
        (ionChange)="information_changed()" [(ngModel)]="userInput.tmp_user.email"
        placeholder="test@example.com"></ion-input>
    </ion-item>
    <ion-item>
      <ion-input [label]="lang.text['Profile']['password']" class="ion-text-end" (ionChange)="information_changed()"
        [(ngModel)]="userInput.tmp_user.password"
        [placeholder]="userInput.tmp_user.pass_placeholder || lang.text['Profile']['at_least']"></ion-input>
    </ion-item>
    <ion-item>
      <ion-input [label]="lang.text['Profile']['user_display_name']" class="ion-text-end"
        (ionChange)="information_changed()" [(ngModel)]="userInput.tmp_user.display_name"
        [placeholder]="lang.text['Profile']['name_placeholder']"></ion-input>
    </ion-item>
  </div>
  <ion-item-divider>
    <ion-label>{{lang.text['WebLinkGen']['AutoOpenChannel']}}</ion-label>
  </ion-item-divider>
  <ion-item button (click)="userInput.open_channel = !userInput.open_channel; information_changed()"
    [disabled]="!userInput.servers.length || !userInput.groups.length || userInput.open_prv_channel != ''">
    <ion-label>{{lang.text['WebLinkGen']['OpenGroupChannel']}}</ion-label>
    <ion-toggle class="ignore_toggles" [(ngModel)]="userInput.open_channel" slot="end"></ion-toggle>
  </ion-item>
  <ion-item button [disabled]="!userInput.servers.length || userInput.open_channel" (click)="paste_user_id()">
    <ion-label>{{lang.text['WebLinkGen']['OpenPrivateChannel']}}</ion-label>
    <ion-label class="ion-text-end" color="medium">{{userInput.open_prv_channel ?
      userInput.open_prv_channel : lang.text['WebLinkGen']['ClickToPaste']}}</ion-label>
  </ion-item>
</ion-content>