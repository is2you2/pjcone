# 프로젝트 콘
Project: Cone 은 웹에서 쉽게 설치/삭제할 수 있는 내부망 특화 채팅앱입니다.  
많은 기능이 계획되어 있지만, 이미 준비된 기능들도 많아서 오픈소스로 관리를 시작합니다.

사용자 수준에서는 아래와 같은 특징을 느낄 수 있습니다.

1. 사용자가 사설서버를 직접 운영하여 채팅을 진행할 수 있습니다.
2. 개인정보를 검토하지 않으므로 **완벽하게 익명**으로 이용할 수 있습니다.
3. 채팅 도중에 직접 *.blender 파일이나 *.pck 파일을 열람하여 검토할 수 있습니다.

앱에서 공유되는 파일은 연결된 네트워크 상에 완벽하게 공개 상태가 되며, 별도의 설정이 되어있지 않다면 게시/삭제 등의 행동이 즉시 처리됩니다.
- 채널 등에서 공유된 첨부파일은 공개 링크가 생성되므로 파일 주소를 안다면 회원 여부와 무관하게 인터넷 또는 같은 네트워크에 연결된 모든 사람들이 접근할 수 있습니다.
- 채널에서 공유된 첨부파일이 포함된 메시지를 삭제하는 경우 즉시 해당 파일이 삭제됩니다.
- 채널에서 공유된 첨부파일 정보는 채널을 벗어날 때 즉시 일괄 삭제처리 됩니다.
- 서버에서 공유된 파일, 대화 등의 정보는 회원탈퇴시 즉시 전부 삭제처리 됩니다.
- 사용자측에서 파일 서버만 별도로 운영하여 파일을 관리할 수도 있습니다.

클라이언트를 체험하려면 [이 링크를 클릭](https://is2you2.github.io/pjcone_pwa/)해주세요.

## 주의사항
이 앱은 개발팀 등의 소통을 원활하게 하기 위해 공유되는 정보 대부분을 **공개처리**하고 있습니다.  
기본적으로 익명성을 내세운 회원 방침을 사용하고 있으나 이 앱에 특별한 변형을 가하지 않고 직접 서비스 용도로 활용하게 되면 **서버관리자가 보안취약점을 가진 서버와 함께, 개인정보보호법을 위반할 가능성이 매우 큽니다**.  
빠르고 자유로운 소통을 추구하기 위해 보안이 느슨하게 구성되어있으므로 이 부분을 반드시 인지하고 계셔야합니다.

이에 대해 잘 모르겠다면 다음과 같은 방법으로 사용하시는 것을 권고합니다.

1. 개인이 개인 용도로, 개인만 사용하고, 개인이 전부 책임지겠다면, 신경쓰지 않으셔도 괜찮습니다.
2. 신뢰할 수 있는 사용자만을 본인 서버에 초대하세요.
3. 내부망에서 사용하시는 것도 좋은 방법입니다.
4. 이 앱의 서버는 휴대폰에서 돌아갈만큼 가볍습니다. 휴대폰에서 서버를 열고 핫스팟으로 근처 사람들과만 소통하는 것도 방법이 될 수 있습니다.

또는 자유도를 포기하고, 서버 보안 설정을 강화하여 일반적으로 사용해주세요.

## 이 프로젝트에 기여
이 프로젝트는 [ionic framework](https://ionicframework.com/), [p5js](https://p5js.org/), [Godot engine](https://godotengine.org/)로 제작되었습니다.

프로젝트에 직접 참여하는 경우, contributors.json 파일에 기여자 정보를 입력해주세요.  
앱 내 설정 > 제작자 페이지에서 확인하실 수 있습니다.

양식은 thanks_to.json 파일과 동일합니다.

기여자가 콘텐츠를 제공하는 경우 기여자 정보의 desc 자리에 파일 경로와 제작자, 적용되는 라이선스를 명시해주세요.

## p5js 타입 오류 (@types/p5)
p5.filter 항목의 옵션 파라미터가 아직 타입에 반영되지 않아 직접 구조를 수정해야합니다.
p5.filter(필터 이름, 정도, [WebGL 사용여부: boolean]);

## p5js 런타임
웹앱이 백그라운드에 있게 되면 p5js.draw()는 행동하지 않음

그러고나면 빌드가 오류없이 진행됩니다.

## Angular Offline PWA 구성
angular.json 파일의 40번째 줄에 BaseHref 인자를 추가하기 ("/pjcone_pwa/" 처럼 앞뒤로 "/" 표시 필요함)

## 플러그인 설치/삭제 후
- npx cap sync
- 라이선스 파일에 변경 사항을 업데이트: https://www.npmjs.com/package/nlf
  - npm install -g nlf
  - nlf -d > src/assets/data/docs/licenses.txt (package.json 파일이 있는, 프로젝트 폴더에서)
  - 해당 파일을 검토

## 고도 프레임 사용 제한사항
* **정말 이상하지만 Mobile chrome 에서 wasm 로드 오류 mono 버전으로 출시하면 문제 해결됨**
- GodotViewer 구성 제한사항
  - 사용자가 별도 클래스를 생성한 경우 .pck 파일에 포함되지 않음
  - Singleton이 설정된 경우 정상적으로 동작하지 않음 (싱글톤 없는 씬)
  - InputMap 관련 정보를 받아올 수 없음
  - 기타 project.godot 및 환경 설정에 포함되는 모든 정보들을 이용할 수 없음, 필요하다면 스크립트로 처리 필요
- nav.push로 고도 HTML5 개체를 불렀다가 돌아가거나, nav.root으로 이전 기록을 삭제하는 경우 고도 HTML5 개체도 삭제됨
  - modal 위에서 실행될 경우 modal의 부모페이지가 남아있다면 **메모리 누적됨**
  - nav.root 에 생성 후 페이지에 돌아올 수 있도록 push 등으로 페이지가 변경된 경우 백그라운드에서 계속 운용
  - iframe 개체를 지워도 고도엔진 개체 삭제 (정지)
  - iframe 개체가 hidden 되더라도 백그라운드에서 진행됨 (숨기기 무의미)

## Blender 4.1.1 불러오기 제한사항
- Triangluate 처리가 되어있어야 면처리의 정확도가 높아집니다
- 리소스가 포함된 파일이어야 텍스처 등이 표현됩니다.
- [jsBlend](https://github.com/acweathersby/js.blend) 프로젝트에서 약간의 변형이 가해졌습니다. (MIT, 라이선스 표시됨)

## Nakama 서버에서 알림
- 1: 사용자 전체에게 알림 메시지 발송

## Code License
GPL 3.0

## CCL CC BY 4.0
ion-icon 등과 같이 외부에서 가져온 아이콘이 아니라면 CC BY 4.0 를 적용합니다.